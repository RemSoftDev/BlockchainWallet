<div *ngIf="showNotWind" class="notificationWindow container-fluid">
  <div class="row">
    <div class="col-md-4 col-md-offset-8">
      <div class="closeDiv">
        <span (click)="closeNotificationWindow()" class="glyphicon glyphicon-remove"></span>
      </div>
    </div>
  </div>
  <div class="row text-center">

    <div class="col-md-4 col-md-offset-4">
      <h4>Notifications</h4>
    </div>

  </div>
  <div class="row">
    <div class="col-md-10 col-md-offset-1">

      <form>

        <div class="form-check">
          <input #withNotification class="form-check-input notificationInput"  type="checkbox" (change)="withNotifications()">
          Without notifications
        </div>

        <div class="form-check">
          <input #whenTokenSent (change)="whenTokenSentFunc()" class="form-check-input notificationInput" type="checkbox" [disabled]=!isWithNotifications>
          When
          <select #whenTokenSentValue [disabled]=!isWithNotifications||!isTokenSent>
            <option class="dropdownInputField" value="ETH">ETH</option>
            <option class="dropdownInputField" *ngFor="let token of walletInfo.tokens" value={{token.address}}>{{token.symbol | slice : 0:5}}</option>
          </select>
          is sent
        </div>

        <div class="form-check">
          <input #whenAnythingSent class="form-check-input notificationInput" type="checkbox" [disabled]=!isWithNotifications>
          When anything was sent from this wallet
        </div>

        <div class="form-check">
          <input #whenNumberOfTokenSent (change)="whenNumberOfTokenSentFunc()" class="form-check-input notificationInput" type="checkbox" [disabled]=!isWithNotifications>
          When
          <input #whenNumberOfTokenSentValueNumberFrom placeholder="number-from" class="notificationSmallInput form-check-input" [disabled]=!isWithNotifications||!isNumberOfTokenSent>-
          <input #whenNumberOfTokenSentValueNumberTo placeholder="number-to" class="notificationSmallInput form-check-input" [disabled]=!isWithNotifications||!isNumberOfTokenSent>-
          of
          <select #whenNumberOfTokenSentValueToken [disabled]=!isWithNotifications||!isNumberOfTokenSent>
            <option class="dropdownInputField" value="ETH">ETH</option>
            <option *ngFor="let token of walletInfo.tokens" value={{token.address}}>{{token.symbol | slice : 0:5}}</option>
          </select>
          was sent
        </div>

        <div class="form-check">
          <input #whenTokenReceived (change)="whenTokenReceivedFunc()" class="form-check-input notificationInput" type="checkbox" [disabled]=!isWithNotifications>
          When
          <select #whenTokenReceivedValue [disabled]=!isWithNotifications||!isTokenReceived>
            <option class="dropdownInputField" value="ETH">ETH</option>
            <option *ngFor="let token of walletInfo.tokens" value={{token.address}}>{{token.symbol | slice : 0:5}}</option>
          </select>
          is received
        </div>

        <div class="form-check">
          <input #whenNumberOfTokenReceived (change)="whenNumberOfTokenReceivedFunc()" class="form-check-input notificationInput" type="checkbox" [disabled]=!isWithNotifications>
          When
          <input #whenNumberOfTokenReceivedValueNumber placeholder="number" class="notificationSmallInput form-check-input" [disabled]=!isWithNotifications||!isNumberOfTokenReceived>
          of
          <select #whenNumberOfTokenReceivedValueToken [disabled]=!isWithNotifications||!isNumberOfTokenReceived>
            <option class="dropdownInputField" value="ETH">ETH</option>
            <option *ngFor="let token of walletInfo.tokens" value={{token.address}}>{{token.symbol | slice : 0:5}}</option>
          </select>
          was received
        </div>       
        <div class="form-group">
          <button (click)="setNotification(withNotification,whenTokenSent,whenAnythingSent,
                  whenNumberOfTokenSent,whenTokenReceived,whenNumberOfTokenReceived,whenTokenSentValue,
                  whenNumberOfTokenSentValueNumberFrom,whenNumberOfTokenSentValueNumberTo,whenNumberOfTokenSentValueToken,whenTokenReceivedValue,
                  whenNumberOfTokenReceivedValueNumber,whenNumberOfTokenReceivedValueToken)"
                  type="submit" [disabled]="isRequesting" class="notificationButton btn btn-primary">
            Submit
          </button>
        </div>

      </form>
    </div>
  </div>

</div>

<div *ngIf="errors" class="alert alert-danger" role="alert">
  Opps, some error occurred. Try again
</div>

<div *ngIf="infoRequesting" class="row">
  <div class="col-sm-4">
    <h4>Wallet Address <span (click)="showNotificationWindow()" class="addStar glyphicon glyphicon-star-empty"></span></h4>
    <p>{{searchString}}</p>
  </div>

  <div class="col-sm-3 col-sm-offset-4">
    <h5>ETH : {{walletInfo.balance | number : '1.2-10'}} </h5>

    <div class="dropdown">
      <button class="dropdownBtn btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
        Tokens &nbsp;
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu">
        <li *ngFor="let token of walletInfo.tokens" class="dropdown-item">
          <p class="tokenSymbol">{{token.symbol}}</p>
          <p class="tokenBalanceText">{{token.balance | number : '1.2-2'}}</p>
        </li>
      </ul>
    </div>

  </div>
</div>

<div *ngIf="!infoRequesting||!transactionRequesting" class="row">
  <app-spinner></app-spinner>
</div>

<div *ngIf="transactionRequesting" class="row tableRow">
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">TxHash</th>
        <th scope="col">From</th>
        <th scope="col">To</th>
        <th scope="col">What</th>
        <th scope="col">Quantity</th>
        <th scope="col">Date/Time</th>
        <th scope="col">Success</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let trans of transactionsModel.transactions">
        <th title="{{trans.transactionHash}}">{{trans.transactionHash | slice : 0:20}}...</th>
        <td title="{{trans.fromAddress}}">
          <a [routerLink]='["/search",trans.fromAddress]'>
            {{trans.fromAddress | slice : 0:20}}...
          </a>
        </td>
        <td title="{{trans.toAddress}}">
          <a [routerLink]='["/search",trans.toAddress]'>
            {{trans.toAddress | slice : 0:20}}...
          </a>
        </td>
        <td *ngIf="trans.what=='ETH'" title="{{trans.what}}">
          {{trans.what}}
        </td>
        <td *ngIf="trans.what!='ETH'" title="{{trans.what}}">
          <a [routerLink]='["/search/contract/",trans.contractAddress]'>
            {{trans.what}}
          </a>
        </td>
        <td title="{{trans.decimalValue}}">{{trans.decimalValue | number : '1.2-5'}}</td>
        <td title="{{trans.date }}">{{trans.date | date : 'short' }}</td>
        <td title="{{trans.isSuccess}}">{{trans.isSuccess}}</td>
      </tr>
    </tbody>
  </table>
  <div class="col-md-12 text-center">
    <div *ngIf="moreTransactionRequesting" class="row">
      <app-spinner></app-spinner>
    </div>
    <button (click)="loadTransaction(transactionsModel.skipElementsNumber)" class="btn btn-primary">More</button>
  </div>
</div>
